{"ast":null,"code":"import React,{useEffect}from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Button}from'react-bootstrap';import Paginate from'../components/Paginate';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import Loader from'../components/Loader';import{listProducts,deleteProduct}from'../actions/productActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ProductListScreen=function ProductListScreen(_ref){var history=_ref.history,match=_ref.match;var pageNumber=match.params.pageNumber||1;var dispatch=useDispatch();var productList=useSelector(function(state){return state.productList;});var products=productList.products,loading=productList.loading,error=productList.error,page=productList.page,pages=productList.pages;var userLogin=useSelector(function(state){return state.userLogin;});var userData=userLogin.userData;var productDelete=useSelector(function(state){return state.productDelete;});var successDelete=productDelete.success,loadingDelete=productDelete.loading,errorDelete=productDelete.error;var i=1;useEffect(function(){if(userData&&userData.isAdmin){dispatch(listProducts('',pageNumber));}else{history.push('/login');}},[dispatch,history,successDelete,userData,pageNumber]);var deleteHandler=function deleteHandler(id){if(window.confirm('Are you sure?')){dispatch(deleteProduct(id));}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Products\"}),loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"SN\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PRICE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CATEGORY\"}),/*#__PURE__*/_jsx(\"th\",{children:\"OWNER\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CREATED ON\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(function(product){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:i++}),/*#__PURE__*/_jsx(\"td\",{children:product._id}),/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsxs(\"td\",{children:[\"Rs \",product.Cost.price]}),/*#__PURE__*/_jsx(\"td\",{children:product.category}),/*#__PURE__*/_jsx(\"td\",{children:product.seller.sellername}),/*#__PURE__*/_jsx(\"td\",{children:product.createdAt.substring(0,10)}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/product/\".concat(product._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(product._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},product._id);})})]}),/*#__PURE__*/_jsx(Paginate,{pages:pages,page:page,isAdmin:true})]})]});};export default ProductListScreen;","map":{"version":3,"names":["React","useEffect","LinkContainer","Table","Button","Paginate","useDispatch","useSelector","Message","Loader","listProducts","deleteProduct","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductListScreen","_ref","history","match","pageNumber","params","dispatch","productList","state","products","loading","error","page","pages","userLogin","userData","productDelete","successDelete","success","loadingDelete","errorDelete","i","isAdmin","push","deleteHandler","id","window","confirm","children","variant","striped","bordered","hover","responsive","className","map","product","_id","name","Cost","price","category","seller","sellername","createdAt","substring","to","concat","onClick"],"sources":["C:/Used Book Selller with Recommendation/frontend/src/screens/ProductListScreen.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport { Table, Button } from 'react-bootstrap'\r\nimport Paginate from '../components/Paginate'\r\n\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Message from '../components/Message'\r\nimport Loader from '../components/Loader'\r\nimport { listProducts, deleteProduct } from '../actions/productActions'\r\nconst ProductListScreen = ({ history, match }) => {\r\n  const pageNumber = match.params.pageNumber || 1\r\n  const dispatch = useDispatch()\r\n  const productList = useSelector((state) => state.productList)\r\n  const { products, loading, error, page, pages } = productList\r\n  const userLogin = useSelector((state) => state.userLogin)\r\n  const { userData } = userLogin\r\n  const productDelete = useSelector((state) => state.productDelete)\r\n  const {\r\n    success: successDelete,\r\n    loading: loadingDelete,\r\n    error: errorDelete,\r\n  } = productDelete\r\n  var i = 1\r\n  useEffect(() => {\r\n    if (userData && userData.isAdmin) {\r\n      dispatch(listProducts('', pageNumber))\r\n    } else {\r\n      history.push('/login')\r\n    }\r\n  }, [dispatch, history, successDelete, userData, pageNumber])\r\n\r\n  const deleteHandler = (id) => {\r\n    if (window.confirm('Are you sure?')) {\r\n      dispatch(deleteProduct(id))\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <h1>Products</h1>\r\n      {loadingDelete && <Loader />}\r\n      {errorDelete && <Message variant='danger'>{errorDelete}</Message>}\r\n      {loading ? (\r\n        <Loader />\r\n      ) : error ? (\r\n        <Message variant='danger'>{error}</Message>\r\n      ) : (\r\n        <>\r\n          <Table striped bordered hover responsive className='table-sm'>\r\n            <thead>\r\n              <tr>\r\n                <th>SN</th>\r\n                <th>ID</th>\r\n                <th>NAME</th>\r\n                <th>PRICE</th>\r\n                <th>CATEGORY</th>\r\n                <th>OWNER</th>\r\n                <th>CREATED ON</th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {products.map((product) => (\r\n                <tr key={product._id}>\r\n                  <td>{i++}</td>\r\n                  <td>{product._id}</td>\r\n                  <td>{product.name}</td>\r\n                  <td>Rs {product.Cost.price}</td>\r\n                  <td>{product.category}</td>\r\n                  <td>{product.seller.sellername}</td>\r\n                  <td>{product.createdAt.substring(0, 10)}</td>\r\n                  <td>\r\n                    <LinkContainer to={`/admin/product/${product._id}/edit`}>\r\n                      <Button variant='light' className='btn-sm'>\r\n                        <i className='fas fa-edit'></i>\r\n                      </Button>\r\n                    </LinkContainer>\r\n                    <Button\r\n                      variant='danger'\r\n                      className='btn-sm'\r\n                      onClick={() => deleteHandler(product._id)}\r\n                    >\r\n                      <i className='fas fa-trash'></i>\r\n                    </Button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n          <Paginate pages={pages} page={page} isAdmin={true} />\r\n        </>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ProductListScreen\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,aAAa,KAAQ,wBAAwB,CACtD,OAASC,KAAK,CAAEC,MAAM,KAAQ,iBAAiB,CAC/C,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAE7C,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,MAAO,CAAAC,OAAO,KAAM,uBAAuB,CAC3C,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,OAASC,YAAY,CAAEC,aAAa,KAAQ,2BAA2B,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBACvE,GAAM,CAAAC,iBAAiB,CAAG,QAApB,CAAAA,iBAAiBA,CAAAC,IAAA,CAA2B,IAArB,CAAAC,OAAO,CAAAD,IAAA,CAAPC,OAAO,CAAEC,KAAK,CAAAF,IAAA,CAALE,KAAK,CACzC,GAAM,CAAAC,UAAU,CAAGD,KAAK,CAACE,MAAM,CAACD,UAAU,EAAI,CAAC,CAC/C,GAAM,CAAAE,QAAQ,CAAGlB,WAAW,EAAE,CAC9B,GAAM,CAAAmB,WAAW,CAAGlB,WAAW,CAAC,SAACmB,KAAK,QAAK,CAAAA,KAAK,CAACD,WAAW,GAAC,CAC7D,GAAQ,CAAAE,QAAQ,CAAkCF,WAAW,CAArDE,QAAQ,CAAEC,OAAO,CAAyBH,WAAW,CAA3CG,OAAO,CAAEC,KAAK,CAAkBJ,WAAW,CAAlCI,KAAK,CAAEC,IAAI,CAAYL,WAAW,CAA3BK,IAAI,CAAEC,KAAK,CAAKN,WAAW,CAArBM,KAAK,CAC7C,GAAM,CAAAC,SAAS,CAAGzB,WAAW,CAAC,SAACmB,KAAK,QAAK,CAAAA,KAAK,CAACM,SAAS,GAAC,CACzD,GAAQ,CAAAC,QAAQ,CAAKD,SAAS,CAAtBC,QAAQ,CAChB,GAAM,CAAAC,aAAa,CAAG3B,WAAW,CAAC,SAACmB,KAAK,QAAK,CAAAA,KAAK,CAACQ,aAAa,GAAC,CACjE,GACW,CAAAC,aAAa,CAGpBD,aAAa,CAHfE,OAAO,CACEC,aAAa,CAEpBH,aAAa,CAFfN,OAAO,CACAU,WAAW,CAChBJ,aAAa,CADfL,KAAK,CAEP,GAAI,CAAAU,CAAC,CAAG,CAAC,CACTtC,SAAS,CAAC,UAAM,CACd,GAAIgC,QAAQ,EAAIA,QAAQ,CAACO,OAAO,CAAE,CAChChB,QAAQ,CAACd,YAAY,CAAC,EAAE,CAAEY,UAAU,CAAC,CAAC,CACxC,CAAC,IAAM,CACLF,OAAO,CAACqB,IAAI,CAAC,QAAQ,CAAC,CACxB,CACF,CAAC,CAAE,CAACjB,QAAQ,CAAEJ,OAAO,CAAEe,aAAa,CAAEF,QAAQ,CAAEX,UAAU,CAAC,CAAC,CAE5D,GAAM,CAAAoB,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,EAAE,CAAK,CAC5B,GAAIC,MAAM,CAACC,OAAO,CAAC,eAAe,CAAC,CAAE,CACnCrB,QAAQ,CAACb,aAAa,CAACgC,EAAE,CAAC,CAAC,CAC7B,CACF,CAAC,CAED,mBACE5B,KAAA,CAAAE,SAAA,EAAA6B,QAAA,eACEjC,IAAA,OAAAiC,QAAA,CAAI,UAAQ,EAAK,CAChBT,aAAa,eAAIxB,IAAA,CAACJ,MAAM,IAAG,CAC3B6B,WAAW,eAAIzB,IAAA,CAACL,OAAO,EAACuC,OAAO,CAAC,QAAQ,CAAAD,QAAA,CAAER,WAAW,EAAW,CAChEV,OAAO,cACNf,IAAA,CAACJ,MAAM,IAAG,CACRoB,KAAK,cACPhB,IAAA,CAACL,OAAO,EAACuC,OAAO,CAAC,QAAQ,CAAAD,QAAA,CAAEjB,KAAK,EAAW,cAE3Cd,KAAA,CAAAE,SAAA,EAAA6B,QAAA,eACE/B,KAAA,CAACZ,KAAK,EAAC6C,OAAO,MAACC,QAAQ,MAACC,KAAK,MAACC,UAAU,MAACC,SAAS,CAAC,UAAU,CAAAN,QAAA,eAC3DjC,IAAA,UAAAiC,QAAA,cACE/B,KAAA,OAAA+B,QAAA,eACEjC,IAAA,OAAAiC,QAAA,CAAI,IAAE,EAAK,cACXjC,IAAA,OAAAiC,QAAA,CAAI,IAAE,EAAK,cACXjC,IAAA,OAAAiC,QAAA,CAAI,MAAI,EAAK,cACbjC,IAAA,OAAAiC,QAAA,CAAI,OAAK,EAAK,cACdjC,IAAA,OAAAiC,QAAA,CAAI,UAAQ,EAAK,cACjBjC,IAAA,OAAAiC,QAAA,CAAI,OAAK,EAAK,cACdjC,IAAA,OAAAiC,QAAA,CAAI,YAAU,EAAK,cACnBjC,IAAA,SAAS,GACN,EACC,cACRA,IAAA,UAAAiC,QAAA,CACGnB,QAAQ,CAAC0B,GAAG,CAAC,SAACC,OAAO,qBACpBvC,KAAA,OAAA+B,QAAA,eACEjC,IAAA,OAAAiC,QAAA,CAAKP,CAAC,EAAE,EAAM,cACd1B,IAAA,OAAAiC,QAAA,CAAKQ,OAAO,CAACC,GAAG,EAAM,cACtB1C,IAAA,OAAAiC,QAAA,CAAKQ,OAAO,CAACE,IAAI,EAAM,cACvBzC,KAAA,OAAA+B,QAAA,EAAI,KAAG,CAACQ,OAAO,CAACG,IAAI,CAACC,KAAK,GAAM,cAChC7C,IAAA,OAAAiC,QAAA,CAAKQ,OAAO,CAACK,QAAQ,EAAM,cAC3B9C,IAAA,OAAAiC,QAAA,CAAKQ,OAAO,CAACM,MAAM,CAACC,UAAU,EAAM,cACpChD,IAAA,OAAAiC,QAAA,CAAKQ,OAAO,CAACQ,SAAS,CAACC,SAAS,CAAC,CAAC,CAAE,EAAE,CAAC,EAAM,cAC7ChD,KAAA,OAAA+B,QAAA,eACEjC,IAAA,CAACX,aAAa,EAAC8D,EAAE,mBAAAC,MAAA,CAAoBX,OAAO,CAACC,GAAG,SAAQ,CAAAT,QAAA,cACtDjC,IAAA,CAACT,MAAM,EAAC2C,OAAO,CAAC,OAAO,CAACK,SAAS,CAAC,QAAQ,CAAAN,QAAA,cACxCjC,IAAA,MAAGuC,SAAS,CAAC,aAAa,EAAK,EACxB,EACK,cAChBvC,IAAA,CAACT,MAAM,EACL2C,OAAO,CAAC,QAAQ,CAChBK,SAAS,CAAC,QAAQ,CAClBc,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAxB,aAAa,CAACY,OAAO,CAACC,GAAG,CAAC,EAAC,CAAAT,QAAA,cAE1CjC,IAAA,MAAGuC,SAAS,CAAC,cAAc,EAAK,EACzB,GACN,GArBEE,OAAO,CAACC,GAAG,CAsBf,EACN,CAAC,EACI,GACF,cACR1C,IAAA,CAACR,QAAQ,EAAC0B,KAAK,CAAEA,KAAM,CAACD,IAAI,CAAEA,IAAK,CAACU,OAAO,CAAE,IAAK,EAAG,GAExD,GACA,CAEP,CAAC,CAED,cAAe,CAAAtB,iBAAiB"},"metadata":{},"sourceType":"module"}